<%- include('../layouts/header.ejs',{userSession,cartLength,category}) %>
    <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="index.htmln" rel="nofollow">Home</a>
                    <span></span> Fashion
                    <span></span> Abstract Print Patchwork Dress
                </div>
            </div>
        </div>
     <!-- <form action="/admin/addtoCart" method="POST" > -->

            <section class="mt-50 mb-50">

                <div class="container">
                    <div class="row">
                        <div class="col-lg-9">
                            <div class="product-detail accordion-detail">
                                <div class="row mb-50">
                                    <div class="col-md-6 col-sm-12 col-xs-12">
                                        <div class="detail-gallery">
                                            <span class="zoom-icon"><i class="fi-rs-search"></i></span>
                                            <!-- MAIN SLIDES -->



                                            <div class="product-image-slider">
                                                <% for (let i=0; i < product.images.length; i++) { %>
                                                    <figure class="border-radius-10">
                                                        <img src="/admin/assets/imgs/category/<%= product.images[i] %>"
                                                            alt="product image" alt="product image">
                                                    </figure>
                                                    <% } %>




                                            </div>





                                            <!-- THUMBNAILS -->
                                            <div class="slider-nav-thumbnails pl-15 pr-15">

                                                <% for (let i=0; i < product.images.length; i++) { %>
                                                    <div><img src="/admin/assets/imgs/category/<%= product.images[i] %>"
                                                            alt="product image"></div>
                                                    <% } %>


                                            </div>
                                        </div>
                                        <!-- End Gallery -->
                                        <div class="social-icons single-share">
                                            <ul class="text-grey-5 d-inline-block">
                                                <li><strong class="mr-10"></strong></li>
                                                <li class="social-facebook"><a href="#"><img src="#" alt=""></a></li>
                                                <li class="social-twitter"> <a href="#"><img src="#" alt=""></a></li>
                                                <li class="social-instagram"><a href="#"><img src="#" alt=""></a>
                                                </li>
                                                <li class="social-linkedin"><a href="#"><img src="#" alt=""></a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-12 col-xs-12">
                                        <div class="detail-info">
                                            <h2 class="title-detail">
                                                <%= product.title%>
                                            </h2>
                                            <div class="product-detail-rating">
                                                <div class="pro-details-brand">
                                                    <span> Brand: <a href="shop-grid-right.html">
                                                            <%= brand.name %>
                                                        </a></span>
                                                </div>
                                                <div class="product-rate-cover text-end">
                                                    <div class="product-rate d-inline-block">
                                                        <div class="product-rating" style="width:90%">
                                                        </div>
                                                    </div>
                                                    <span class="font-small ml-5 text-muted"> (25 reviews)</span>
                                                </div>
                                            </div>
                                            <div class="clearfix product-price-cover">
                                                <div class="product-price primary-color float-left">
                                                    <% if(product.offer >0){%>
                                                    <ins><span class="text-brand">₹<%= Math.round((product.price - (product.price * product.offer) / 100)).toString() %></span></ins>
                                                    <ins><span class="old-price font-md ml-15">₹
                                                        <%=Math.round(product.price) %>
                                                    </span></ins>
                                                    <%}else{%>
                                                        <ins><span class="text-brand">₹<%= Math.round(product.price) %></span></ins>
                                                        <ins><span class="old-price font-md ml-15">₹
                                                            <%=Math.round(product.price+50) %>
                                                        </span></ins>

                                                        <%}%>
                                                   <% if(product.offer >0){%>
                                                    <span class="save-price  font-md color3 ml-15"><%= product.offer %>% Off</span>
                                                    <% } %>
                                                </div>
                                            </div>
                                            <div class="bt-1 border-color-1 mt-15 mb-15"></div>
                                            <div class="short-desc mb-30">
                                                <p>
                                                    <%= product.description %>
                                                </p>
                                            </div>
                                          
                                            <div class="short-desc mb-30">
                                                <div>
                                                    <% if(product.quantity <= 5 && product.quantity !== 0){ %>
                                                        <p style="color: red; text-align: center;">Only <%= product.quantity %> left in Stock !</p>
                                                        <% } %>
                                                </div>
                                                <span class="dropdown-label">Flavours:</span>
                                                <div class="custom-dropdown">
                                                    <select id="selectedFlavourInput" 
                                                        class="form-select">
                                                        <% for(let i=0;i<product.flavour.length;i++) { %>
                                                            <option name="selectedFlavour" value="<%= product.flavour[i] %>" class="font">
                                                                <%= product.flavour[i] %>
                                                            </option>
                                                            <% }; %>
                                                    </select>
                                                    <span class="dropdown-icon"></span>
                                                </div>
                                            </div>
                                            <div class="short-desc mb-30">
                                                <span class="dropdown-label">Weight in(kg):</span>
                                                <div class="custom-dropdown">
                                                    <select id="selectedWeightInput" class="form-select">
                                                        <% product.weight.forEach(weight=> { %>
                                                            <option name="selectedWeight" value="<%= weight %>"
                                                                class="font">
                                                                <%= weight %> kg
                                                            </option>
                                                            <% }); %>
                                                    </select>
                                                    <span class="dropdown-icon"></span>
                                                </div>

                                                <style>
                                                    /* Styles for the custom dropdown */
                                                    .custom-dropdown {
                                                        position: relative;
                                                        display: inline-block;


                                                    }

                                                    .font {
                                                        font-family: Arial, Helvetica, sans-serif;
                                                        font-size: medium;

                                                    }

                                                    .form-select {
                                                        appearance: none;
                                                        -webkit-appearance: none;
                                                        -moz-appearance: none;
                                                        background-color: #fff;
                                                        border: 1px solid #e5e5e5;
                                                        padding: 8px 35px 8px 10px;
                                                        font-size: 14px;
                                                        border-radius: 4px;
                                                        width: 100%;
                                                        max-width: 200px;
                                                        cursor: pointer;
                                                    }

                                                    .dropdown-label {
                                                        display: block;
                                                        margin-bottom: 5px;
                                                        font-weight: bold;
                                                    }

                                                    .dropdown-icon {
                                                        position: absolute;
                                                        top: 50%;
                                                        right: 10px;
                                                        transform: translateY(-50%);
                                                        pointer-events: none;
                                                        width: 20px;
                                                        height: 20px;
                                                        background-image: url('path-to-your-arrow-icon.svg');
                                                        background-size: cover;
                                                        background-repeat: no-repeat;
                                                    }

                                                    /* Style for dropdown options */
                                                    .dropdown-option {
                                                        padding: 8px 10px;
                                                    }

                                                    /* Hover effect for options */
                                                    .dropdown-option:hover {
                                                        background-color: #f5f5f5;
                                                    }
                                                </style>
                                            </div>
                                            <div class="product_sort_info font-xs mb-30">
                                                <ul>
                                                    <li class="mb-10"><i class="fi-rs-crown mr-5"></i> 1 Year AL Jazeera
                                                        Brand Warranty</li>
                                                    <li class="mb-10"><i class="fi-rs-refresh mr-5"></i> 30 Day Return
                                                        Policy</li>
                                                    <li><i class="fi-rs-credit-card mr-5"></i> Cash on Delivery
                                                        available
                                                    </li>
                                                </ul>
                                            </div>

                                            <div class="bt-1 border-color-1 mt-30 mb-30"></div>
                                            <div class="detail-extralink">

                                                <div class="product-extra-link2">
                                                    <br>
                                                    <a aria-label="Add To Wishlist"
                                                        onclick="wishList('<%= product._id %>')"
                                                        class="action-btn hover-up"><i class="fi-rs-heart"></i></a>

                                                       
                                                </div>
                                                <br>
                                                <br>
                                                <!-- <div class=" ml-5"> 
                                                <form id="addToCartForm" action="/addtoCart?id=<%=product._id %>" method="POST">
                                                 
                                                    <input type="hidden" id="selectedFlavourInput" name="selectedFlavours" value="">
                                                    <input type="hidden" id="selectedWeightInput" name="selectedWeights" value="">
                                                    <button type="submit" class="button button-add-to-cart">Add to Cart</button>
                                                </form>
                                                </div> -->
                                             <% if(product.quantity === 0){ %>
                                                <div><p style="color: red; text-align: center;">Out of Stock</p>
                                                <button type="submit"  class="button button-add-to-cart " disabled >Add tocart</button>
                                                </div>
                                           <%  }else{ %>


                                                <div class=" ml-5">
                                                    <a  onclick="addToCart('<%= product.id %>')" >
                                                        <button type="submit"  class="button button-add-to-cart ">Add tocart</button>
                                                    </a>
                                                </div>
<% } %>

                                            </div>
<script>
    function addToCart(id){

    const flavour = document.getElementById('selectedFlavourInput').value;
    const weight = document.getElementById('selectedWeightInput').value


//     let cartCountValue = parseInt($("#cart-Count").text());
//    cartCountValue += 1;

//    // Set the incremented value back to the span
//    $("#cart-Count").text(cartCountValue);

   
                $.ajax({
                    url:`/addtoCart?id=${id}&flavour=${flavour}&weight=${weight}`,
                    method:"get",
                    success: (response)=>{
                        
                        if(response.status){
                            Swal.fire({
  title: 'ADD TO CART',
  text: 'Product Added to cart',
  icon: 'success',
  timer: 3000,
  showConfirmButton: false, // This removes the button
});
                           
                        }else{
                            Swal.fire({
            title: 'STOCK!',
            text: 'Product is out of stock.',
            icon: 'error',
            timer: 5000
        });
        return;
                        }

                    }
                })

    console.log("flaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaavor"+flavour,weight);
//     $(document).ready(function(){
}
//         $('. button-add-to-cart').on('click',function(event){
//             event.preventDefault();
//             var selectedFlavour = $('#selectedFlavourInput').val();
//             var selectedWeight = $('#selectedWeightInput').val();
// console.log('thisssssssssssssssssss os flavour'+selectedFlavour)
//             $('#selectedFlavourInput').val(selectedFlavour);
//             $('#selectedWeightInput').val(selectedWeight);

//             $('#addToCartForm').submit();
//         })
//     })
</script>



        <!-- </form> -->
        <!--+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
      
        </div>
        </div>
        <ul class="product-meta font-xs color-grey mt-50">


            <li class="mb-5">Tags: <a href="#" rel="tag">
                    <%= product.category %>
                </a>

            </li>
            <li>Availability:<span class="in-stock text-success ml-5">
                    <%= product.quantity %> in Stock
                </span></li>
        </ul>
        </div>
        <!-- Detail Info -->
        </div>
        </div>
        <div class="tab-style3">
            <ul class="nav nav-tabs text-uppercase">
                <li class="nav-item">
                    <a class="nav-link active" id="Description-tab" data-bs-toggle="tab"
                        href="#Description">Description</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="Additional-info-tab" data-bs-toggle="tab" href="#Additional-info">Additional
                        info</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="Reviews-tab" data-bs-toggle="tab" href="#Reviews">Reviews
                        (3)</a>
                </li>
            </ul>
            <div class="tab-content shop_info_tab entry-main-content">
                <div class="tab-pane fade show active" id="Description">
                    <div class="">
                        <p>Uninhibited carnally hired played in whimpered dear gorilla koala depending
                            and much yikes off far quetzal goodness and from for grimaced goodness
                            unaccountably and meadowlark near unblushingly crucial scallop
                            tightly neurotic hungrily some and dear furiously this apart.</p>
                        <p>Spluttered narrowly yikes left moth in yikes bowed this that grizzly much
                            hello on spoon-fed that alas rethought much decently richly and wow against
                            the frequent fluidly at formidable acceptably flapped
                            besides and much circa far over the bucolically hey precarious goldfinch
                            mastodon goodness gnashed a jellyfish and one however because.
                        </p>
                        <ul class="product-more-infor mt-30">
                            <li><span>Type Of Packing</span> Bottle</li>
                            <li><span>Color</span> Green, Pink, Powder Blue, Purple</li>
                            <li><span>Quantity Per Case</span> 100ml</li>
                            <li><span>Ethyl Alcohol</span> 70%</li>
                            <li><span>Piece In One</span> Carton</li>
                        </ul>
                        <hr class="wp-block-separator is-style-dots">
                        <p>Laconic overheard dear woodchuck wow this outrageously taut beaver hey hello
                            far meadowlark imitatively egregiously hugged that yikes minimally unanimous
                            pouted flirtatiously as beaver beheld above forward
                            energetic across this jeepers beneficently cockily less a the raucously that
                            magic upheld far so the this where crud then below after jeez enchanting
                            drunkenly more much wow callously irrespective limpet.</p>
                        <h4 class="mt-30">Packaging & Delivery</h4>
                        <hr class="wp-block-separator is-style-wide">
                        <p>Less lion goodness that euphemistically robin expeditiously bluebird smugly
                            scratched far while thus cackled sheepishly rigid after due one assenting
                            regarding censorious while occasional or this more crane
                            went more as this less much amid overhung anathematic because much held one
                            exuberantly sheep goodness so where rat wry well concomitantly.
                        </p>
                        <p>Scallop or far crud plain remarkably far by thus far iguana lewd precociously
                            and and less rattlesnake contrary caustic wow this near alas and next and
                            pled the yikes articulate about as less cackled dalmatian
                            in much less well jeering for the thanks blindly sentimental whimpered less
                            across objectively fanciful grimaced wildly some wow and rose jeepers
                            outgrew lugubrious luridly irrationally attractively
                            dachshund.
                        </p>
                    </div>
                </div>
                <div class="tab-pane fade" id="Additional-info">
                    <table class="font-md">
                        <tbody>
                            <tr class="stand-up">
                                <th>Stand Up</th>
                                <td>
                                    <p>35″L x 24″W x 37-45″H(front to back wheel)</p>
                                </td>
                            </tr>
                            <tr class="folded-wo-wheels">
                                <th>Folded (w/o wheels)</th>
                                <td>
                                    <p>32.5″L x 18.5″W x 16.5″H</p>
                                </td>
                            </tr>
                            <tr class="folded-w-wheels">
                                <th>Folded (w/ wheels)</th>
                                <td>
                                    <p>32.5″L x 24″W x 18.5″H</p>
                                </td>
                            </tr>
                            <tr class="door-pass-through">
                                <th>Door Pass Through</th>
                                <td>
                                    <p>24</p>
                                </td>
                            </tr>
                            <tr class="frame">
                                <th>Frame</th>
                                <td>
                                    <p>Aluminum</p>
                                </td>
                            </tr>
                            <tr class="weight-wo-wheels">
                                <th>Weight (w/o wheels)</th>
                                <td>
                                    <p>20 LBS</p>
                                </td>
                            </tr>
                            <tr class="weight-capacity">
                                <th>Weight Capacity</th>
                                <td>
                                    <p>60 LBS</p>
                                </td>
                            </tr>
                            <tr class="width">
                                <th>Width</th>
                                <td>
                                    <p>24″</p>
                                </td>
                            </tr>
                            <tr class="handle-height-ground-to-handle">
                                <th>Handle height (ground to handle)</th>
                                <td>
                                    <p>37-45″</p>
                                </td>
                            </tr>
                            <tr class="wheels">
                                <th>Wheels</th>
                                <td>
                                    <p>12″ air / wide track slick tread</p>
                                </td>
                            </tr>
                            <tr class="seat-back-height">
                                <th>Seat back height</th>
                                <td>
                                    <p>21.5″</p>
                                </td>
                            </tr>
                            <tr class="head-room-inside-canopy">
                                <th>Head room (inside canopy)</th>
                                <td>
                                    <p>25″</p>
                                </td>
                            </tr>
                            <tr class="pa_color">
                                <th>Color</th>
                                <td>
                                    <p>Black, Blue, Red, White</p>
                                </td>
                            </tr>
                            <tr class="pa_size">
                                <th>Size</th>
                                <td>
                                    <p>M, S</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane fade" id="Reviews">
                    <!--Comments-->
                    <div class="comments-area">
                        <div class="row">
                            <div class="col-lg-8">
                                <h4 class="mb-30">Customer questions & answers</h4>
                                <div class="comment-list">
                                    <div class="single-comment justify-content-between d-flex">
                                        <div class="user justify-content-between d-flex">
                                            <div class="thumb text-center">
                                                <img src="/user/assets/imgs/page/avatar-6.jpg" alt="">
                                                <h6><a href="#">Jacky Chan</a></h6>
                                                <p class="font-xxs">Since 2012</p>
                                            </div>
                                            <div class="desc">
                                                <div class="product-rate d-inline-block">
                                                    <div class="product-rating" style="width:90%">
                                                    </div>
                                                </div>
                                                <p>Thank you very fast shipping from Poland only 3days.
                                                </p>
                                                <div class="d-flex justify-content-between">
                                                    <div class="d-flex align-items-center">
                                                        <p class="font-xs mr-30">December 4, 2020 at
                                                            3:12 pm </p>
                                                        <a href="#" class="text-brand btn-reply">Reply
                                                            <i class="fi-rs-arrow-right"></i> </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--single-comment -->
                                    <div class="single-comment justify-content-between d-flex">
                                        <div class="user justify-content-between d-flex">
                                            <div class="thumb text-center">
                                                <img src="assets/imgs/page/avatar-7.jpg" alt="">
                                                <h6><a href="#">Ana Rosie</a></h6>
                                                <p class="font-xxs">Since 2008</p>
                                            </div>
                                            <div class="desc">
                                                <div class="product-rate d-inline-block">
                                                    <div class="product-rating" style="width:90%">
                                                    </div>
                                                </div>
                                                <p>Great low price and works well.</p>
                                                <div class="d-flex justify-content-between">
                                                    <div class="d-flex align-items-center">
                                                        <p class="font-xs mr-30">December 4, 2020 at
                                                            3:12 pm </p>
                                                        <a href="#" class="text-brand btn-reply">Reply
                                                            <i class="fi-rs-arrow-right"></i> </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--single-comment -->
                                    <div class="single-comment justify-content-between d-flex">
                                        <div class="user justify-content-between d-flex">
                                            <div class="thumb text-center">
                                                <img src="/user/assets/imgs/page/avatar-8.jpg" alt="">
                                                <h6><a href="#">Steven Keny</a></h6>
                                                <p class="font-xxs">Since 2010</p>
                                            </div>
                                            <div class="desc">
                                                <div class="product-rate d-inline-block">
                                                    <div class="product-rating" style="width:90%">
                                                    </div>
                                                </div>
                                                <p>Authentic and Beautiful, Love these way more than
                                                    ever expected They are Great earphones</p>
                                                <div class="d-flex justify-content-between">
                                                    <div class="d-flex align-items-center">
                                                        <p class="font-xs mr-30">December 4, 2020 at
                                                            3:12 pm </p>
                                                        <a href="#" class="text-brand btn-reply">Reply
                                                            <i class="fi-rs-arrow-right"></i> </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--single-comment -->
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <h4 class="mb-30">Customer reviews</h4>
                                <div class="d-flex mb-30">
                                    <div class="product-rate d-inline-block mr-15">
                                        <div class="product-rating" style="width:90%">
                                        </div>
                                    </div>
                                    <h6>4.8 out of 5</h6>
                                </div>
                                <div class="progress">
                                    <span>5 star</span>
                                    <div class="progress-bar" role="progressbar" style="width: 50%;" aria-valuenow="50"
                                        aria-valuemin="0" aria-valuemax="100">50%
                                    </div>
                                </div>
                                <div class="progress">
                                    <span>4 star</span>
                                    <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25"
                                        aria-valuemin="0" aria-valuemax="100">25%
                                    </div>
                                </div>
                                <div class="progress">
                                    <span>3 star</span>
                                    <div class="progress-bar" role="progressbar" style="width: 45%;" aria-valuenow="45"
                                        aria-valuemin="0" aria-valuemax="100">45%
                                    </div>
                                </div>
                                <div class="progress">
                                    <span>2 star</span>
                                    <div class="progress-bar" role="progressbar" style="width: 65%;" aria-valuenow="65"
                                        aria-valuemin="0" aria-valuemax="100">65%
                                    </div>
                                </div>
                                <div class="progress mb-30">
                                    <span>1 star</span>
                                    <div class="progress-bar" role="progressbar" style="width: 85%;" aria-valuenow="85"
                                        aria-valuemin="0" aria-valuemax="100">85%
                                    </div>
                                </div>
                                <a href="#" class="font-xs text-muted">How are ratings calculated?</a>
                            </div>
                        </div>
                    </div>
                    <!--comment form-->
                    <div class="comment-form">
                        <h4 class="mb-15">Add a review</h4>
                        <div class="product-rate d-inline-block mb-30">
                        </div>
                        <div class="row">
                            <div class="col-lg-8 col-md-12">
                                <form class="form-contact comment_form" action="#" id="commentForm">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="form-group">
                                                <textarea class="form-control w-100" name="comment" id="comment"
                                                    cols="30" rows="9" placeholder="Write Comment"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <input class="form-control" name="name" id="name" type="text"
                                                    placeholder="Name">
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <input class="form-control" name="email" id="email" type="email"
                                                    placeholder="Email">
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="form-group">
                                                <input class="form-control" name="website" id="website" type="text"
                                                    placeholder="Website">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <button type="submit" class="button button-contactForm">Submit
                                            Review</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        </div>
        </div>

        <!-- Product sidebar Widget -->


        </div>
        </div>
        </div>
        </section>
    </main>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>



    <!-- <script>
function wishList(id){
   $.ajax({
       url:`/addToList?id=${id}`,
       method:"get",
       success:(response)=>{
           if(response.status){
              
           }else{
               Swal.fire({
   title: 'ALREADY SELECTED!',
   text: 'You already selected',
   icon: 'error',
   timer: 3000,
 

 })
           }

       }
   })



}

   </script>

<script>

function addToCart(id){

let cartCountValue = parseInt($("#cart-Count").text());
cartCountValue += 1;

// Set the incremented value back to the span
$("#cart-Count").text(cartCountValue);


        $.ajax({
            url:`/addToCart?id=${id}`,
            method:"get",
            success: (response)=>{
                
                if(response.status){
                    Swal.fire({
title: 'ADD TO CART',
text: 'Product Added to cart',
icon: 'success',
timer: 1000,
showConfirmButton: false, // This removes the button
});
                   
                }else{
                    alert('errro')
                }

            }
        })

    }



</script>

<script>
function wishList(id){
$.ajax({
   url:`/addToList?id=${id}`,
   method:"get",
   success:(response)=>{
       if(response.status){
        Swal.fire({
title: 'ADDED TO WISHLIST',
text: 'You seleted a Product to the wisslist',
icon: 'success',
timer: 3000,


})
          
       }else{
           Swal.fire({
title: 'ALREADY SELECTED!',
text: 'You already selected',
icon: 'error',
timer: 3000,


})
       }

   }
})



}

</script> -->


    <%- include('../layouts/footer.ejs',{userSession}) %>